{# NAME: (A)3.MPF 同步车右侧 两个键槽 一三通道越程槽 一二通道精车 #}
;------------------------------------
L100 ;'''机床要求'''
;------------------------------------
GROUP_BEGIN(0,"STARTPOSITION",0,0)
DG_CAL_IR9 ;'''载入必要的参数'''
;------------------------------------
;'''零点偏移赋值'''
XMW_1=0
YMW_1=0
ZMW_1=I_R9[35]+I_R9[43]
CMW_1=0
;------------------------------------
;'''两个换刀点赋值'''
I_SPX=580
I_SPY=0
I_SPZ={{ "%.0f" | format(I_SPZ) }}
I_SPX2=580
I_SPY2=0
I_SPZ2=2000
;------------------------------------
;'''限速及零点偏移'''
G92=I_R9[40]
G59 X=XMW_1 Y=YMW_1 Z=ZMW_1 C=CMW_1
;------------------------------------
GROUP_END(0,0)

START_:
WAITM(0,1,2,3)

GROUP_BEGIN(0,"RETURN TOOL",1,0)
G59 X=XMW_1 Y=YMW_1 Z=ZMW_1 C=CMW_1
;------------------------------------
;换空刀T4回初始位置
GX73
GZ73 Y0
T4
D0
GZ273
;------------------------------------
WAITM(1,1,2,3)
GROUP_END(0,1)

WAITM(2,1,2,3)

;------------------------------------
;'''跳步点'''
GOTOF "STEP_"<<I_STEP
;------------------------------------
STEP_0:;'''上活位置'''
;------------------------------------
STEP_2:;'''测量毛坯'''
WAITM(3,1,2,3)

WAITM(4,1,2,3)
;------------------------------------
;'''一通道还测头回刀库'''
;'''二通道粗车左侧夹口位置'''

;------------------------------------
STEP_5:
WAITM(5,1,2,3)
;------------------------------------
;'''夹紧卡爪，松开驱动盘'''

MSG("CLAMPING JAWS")

;------------------------------------
STEP_6:
WAITM(6,1,2,3)
;------------------------------------
;'''二通道车黑皮'''

;------------------------------------
STEP_310:
WAITM(10,1,2,3)
;------------------------------------
;'''一二通道同步粗车-右侧'''

;------------------------------------
STEP_330:
;'''一二通道同步粗车完成'''
;------------------------------------

;------------------------------------
STEP_353:
WAITM(53,1,2,3)
;------------------------------------

;------------------------------------
STEP_356:
WAITM(56,1,2,3)
;------------------------------------


STEP_358:
WAITM(58,1,2,3)
;'''松开卡爪，顶紧驱动盘，准备精车'''
;------------------------------------
MSG("OPENING JAWS")
;------------------------------------
STEP_359:
WAITM(59,1,2,3)
;'''一二三通道精车'''
;----------
;精车程序...
;----------

WAITM(60,1,2,3)

WAITM(61,1,2,3)
;'''精车结束'''
;------------------------------------
STEP_362:
WAITM(62,1,2,3)
;----------
;右侧越程槽程序...
GROUP_BEGIN(0,"RIGHT SIDE RELIEF GROOVE",0,0)
MSG("RIGHT SIDE RELIEF GROOVE")
GX73
GZ73 Y0
T3 D1
G59 X=XMW_1 Y=YMW_1 Z=ZMW_1 C=CMW_1
SETMS(4)
DIAMON
G18
G92=I_R9[40]
G95 G90
G96 S4=150 M4=4
M31=8 ;M30=150 H50=50
WAITM(63,1,3)
;------------------------------------
{{RELIEF_GROOVE_left_CH3}}
;------------------------------------
WAITM(64,1,3)
M31=9
M30=151
;M4=5
GX73
GZ73 Y0
T4 D0
M01
GROUP_END(0,0)
;越程槽程序结束...
;----------

STEP_365:
WAITM(65,1,2,3)
M4=5

GZ273

STEP_368:
WAITM(68,1,2,3)

STEP_371:
WAITM(71,1,2,3)
;------------------------------------
MSG("CLAMPING JAWS")
;------------------------------------
;'''铣键槽'''
STEP_374:
WAITM(74,1,2,3)

STEP_377:
WAITM(77,1,2,3)

STEP_380:
WAITM(80,1,2,3)

STEP_383:
WAITM(83,1,2,3)

;------------------------------------
STEP_850:
WAITM(85,1,2,3)

GROUP_BEGIN(0,"UNLOAD",1,0)
MSG(" UNLOAD FINISH WORKPIECE")
STOPRE
GROUP_END(0,1)
;------------------------------------
WAITM(86,1,2,3)
STEP_8000:

STEP_9999:
STOPRE
WAITM(99,1,2,3)
;------------------------------------
;'''程序结束'''
I_M392

M30
;------------------------------------
;'''错误跳转位置'''
MA333:
M193 H55162
M0
M02

%
